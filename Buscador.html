<!DOCTYPE html>
<html>
<head>
    <title>Buscar Registros</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Buscar Registros</h1>

    <input type="text" id="searchInput" placeholder="Ingrese el primer dato" />
    <button onclick="search()">Buscar</button>

    <table id="resultsTable" style="margin-top: 20px;">
        <thead>
            <tr>
                <th>Id_Chat</th>
                <th>Id_Usu</th>
                <th>Id_Usu2</th>
                <th>Mensaje</th>
            </tr>
        </thead>
        <tbody id="resultsBody"></tbody>
    </table>

    <script>
        function search() {
            var searchValue = document.getElementById('searchInput').value;

            $.ajax({
                url: 'http://localhost:5501/registros',
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    var filteredData = data.filter(function (item) {
                        return item.Id_Chat.toString().startsWith(searchValue);
                    });

                    var tableBody = document.getElementById('resultsBody');
                    tableBody.innerHTML = '';

                    filteredData.forEach(function (item) {
                        var row = document.createElement('tr');

                        var idChatCell = document.createElement('td');
                        idChatCell.textContent = item.Id_Chat;
                        row.appendChild(idChatCell);

                        var idUsuCell = document.createElement('td');
                        idUsuCell.textContent = item.Id_Usu;
                        row.appendChild(idUsuCell);

                        var idUsu2Cell = document.createElement('td');
                        idUsu2Cell.textContent = item.Id_Usu2;
                        row.appendChild(idUsu2Cell);

                        var mensajeCell = document.createElement('td');
                        mensajeCell.textContent = item.Mensaje;
                        row.appendChild(mensajeCell);

                        tableBody.appendChild(row);
                    });
                }
            });
        }
    </script>
</body>
</html>
